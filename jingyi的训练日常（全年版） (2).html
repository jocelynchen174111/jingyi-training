<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>JINGYIçš„è®­ç»ƒæ—¥å¸¸</title>
<style>
body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto; margin: 0; background:#f5f5f5; }
header { background:#111; color:#fff; padding:12px; text-align:center; font-size:18px; }
.calendar { display:grid; grid-template-columns: repeat(7,1fr); gap:4px; padding:8px; }
.day { background:#fff; border-radius:8px; padding:6px; font-size:12px; cursor:pointer; }
.day.done { background:#d9fbe3; }
.day.today { border:2px solid #111; }
.panel { padding:12px; background:#fff; margin:8px; border-radius:10px; }
label { display:block; margin:6px 0; }
select, textarea, input[type=number] { width:100%; padding:6px; font-size:14px; }
button { width:100%; padding:10px; font-size:15px; margin-top:10px; }
fieldset { margin:10px 0; border:1px solid #ccc; padding:6px; border-radius:6px; }
legend { font-weight:bold; }
</style>
</head>
<body>
<header>JINGYIçš„è®­ç»ƒæ—¥å¸¸</header>
<div id="calendar" class="calendar"></div>
<div class="panel" id="detail" style="display:none">
<h3 id="dateTitle"></h3>
<fieldset>
<legend>è·‘æ­¥è®­ç»ƒï¼ˆ10kmè¿›é˜¶ï¼‰</legend>
<label><input type="checkbox" data-k="runWarmUp"> çƒ­èº«æ…¢è·‘ 10-15 åˆ†é’Ÿ</label>
<label><input type="checkbox" data-k="runInterval"> é—´æ­‡è®­ç»ƒï¼ˆå†²åˆº + æ¢å¤æ…¢è·‘ï¼‰</label>
<label><input type="checkbox" data-k="runLong"> é•¿è·ç¦»æ…¢è·‘</label>
<label><input type="checkbox" data-k="runStretch"> ä¸‹è‚¢æ‹‰ä¼¸ / æ”¾æ¾</label>
</fieldset>
<fieldset>
<legend>è‚©å³°åº·å¤è®­ç»ƒ</legend>
<label><input type="checkbox" data-k="facePull"> å¼¹åŠ›å¸¦ Face Pull 3Ã—15</label>
<label><input type="checkbox" data-k="ytw"> Y-T-W ä¿¯èº«æˆ–é å¢™ 2Ã—12</label>
<label><input type="checkbox" data-k="reverseFly"> ä¿¯èº«å“‘é“ƒåå‘é£é¸Ÿ 3Ã—12</label>
<label><input type="checkbox" data-k="shoulderStretch"> è‚©åä¾§æ‹‰ä¼¸ / çƒ­èº«</label>
</fieldset>
<fieldset>
<legend>æ”€å²©è®­ç»ƒ</legend>
<label><input type="checkbox" data-k="climb"> æ”€å²©</label>
<label>å²©é¦†<select data-k="gym"><option></option><option>Benchmark 1</option><option>Benchmark 2</option><option>é¦™è•‰1</option><option>é¦™è•‰2</option><option>é¦™è•‰3</option><option>No Moss</option><option>1778</option><option>ç²‰æŠ±</option><option>å°½å³°</option></select></label>
<label>æ”€å²©ç±»å‹<select data-k="gradeType"><option></option><option>æŠ±çŸ³</option><option>éš¾åº¦</option><option>æ¿å£</option></select></label>
<label>æœ€é«˜V<select data-k="grade"><option></option><option>V0</option><option>V1</option><option>V2</option><option>V3</option><option>V4</option><option>V5</option><option>V6</option><option>V7</option><option>V8</option></select></label>
<label>å®Œæˆæ¡æ•°<select data-k="count"><option></option><option>1</option><option>2</option><option>3</option><option>4</option><option>5+</option></select></label>
</fieldset>
<label>ä½“é‡ï¼ˆkgï¼‰<input type="number" step="0.1" data-k="weight"></label>
<label>æ—©é¤<select data-k="breakfast"><option></option><option>ç‡•éº¦</option><option>èŒ¶å¶è›‹</option></select></label>
<label>åˆé¤<select data-k="lunch"><option></option><option>ä¸‰æ¯é¸¡</option><option>é¸¡èƒ¸è‚‰ä¸‰æ˜æ²»</option></select></label>
<label>æ™šé¤<select data-k="dinner"><option></option><option>éº¦å½“åŠ³åŒå‰</option><option>é¸¡èƒ¸è‚‰</option></select></label>
<label>å’–å•¡/é¥®æ–™/æ°´æœ<textarea data-k="drink"></textarea></label>
<label>å¿ƒæƒ…<select data-k="mood"><option></option><option>å¾ˆå¥½</option><option>æ­£å¸¸</option><option>ä½è½</option></select></label>
<label>æ‰§è¡Œåº¦<select data-k="score"><option></option><option>â­</option><option>â­â­</option><option>â­â­â­</option><option>â­â­â­â­</option><option>â­â­â­â­â­</option></select></label>
<label>æ¯æ—¥æ€»ç»“<textarea data-k="note"></textarea></label>
<button onclick="saveDay()">ä¿å­˜</button>
</div>
<div class="panel"><button onclick="exportCSV()">ğŸ“¤ ä¸€é”®å¯¼å‡º CSV</button></div>
<script>
const cal = document.getElementById('calendar');
const detail = document.getElementById('detail');
const today = new Date();
let currentKey = '';
function buildCalendar(){
  cal.innerHTML='';
  const y=today.getFullYear(), m=today.getMonth();
  const first=new Date(y,m,1).getDay();
  const days=new Date(y,m+1,0).getDate();
  for(let i=0;i<first;i++) cal.appendChild(document.createElement('div'));
  for(let d=1;d<=days;d++){
    const date=`${y}-${String(m+1).padStart(2,'0')}-${String(d).padStart(2,'0')}`;
    const div=document.createElement('div');
    div.className='day';
    if(date===format(today)) div.classList.add('today');
    if(localStorage.getItem('jingyi_'+date)) div.classList.add('done');
    div.textContent=d;
    div.onclick=()=>openDay(date);
    cal.appendChild(div);
  }
}
function openDay(date){
  currentKey='jingyi_'+date;
  document.getElementById('dateTitle').innerText=date;
  detail.style.display='block';
  const data=JSON.parse(localStorage.getItem(currentKey)||'{}');
  detail.querySelectorAll('[data-k]').forEach(el=>{
    if(el.type==='checkbox') el.checked=!!data[el.dataset.k];
    else el.value=data[el.dataset.k]||'';
  });
}
function saveDay(){
  const data={};
  detail.querySelectorAll('[data-k]').forEach(el=>{
    data[el.dataset.k]=el.type==='checkbox'?el.checked:el.value;
  });
  localStorage.setItem(currentKey,JSON.stringify(data));
  buildCalendar();
  alert('å·²ä¿å­˜');
}
function exportCSV(){
  const rows=[];
  for(let i=0;i<localStorage.length;i++){
    const k=localStorage.key(i);
    if(!k.startsWith('jingyi_')) continue;
    const r=JSON.parse(localStorage.getItem(k));
    rows.push({date:k.replace('jingyi_',''),...r});
  }
  if(!rows.length){alert('æš‚æ— æ•°æ®');return;}
  const h=Object.keys(rows[0]);
  const csv=[h.join(',')].concat(rows.map(r=>h.map(x=>`"${(r[x]||'').toString().replace(/"/g,'""')}"`).join(','))).join('\n');
  const blob=new Blob([csv],{type:'text/csv'});
  const a=document.createElement('a');
  a.href=URL.createObjectURL(blob);
  a.download='jingyi_training.csv';
  a.click();
}
function format(d){return d.toISOString().slice(0,10);}
buildCalendar();
</script>
</body>
</html>